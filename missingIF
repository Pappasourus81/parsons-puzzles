<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Fill in the missing code â€” Conditionals</title>
<style>
  :root{
    --bg:#f6f8fb;
    --card:#ffffff;
    --accent:#0b61d6;
    --muted:#6b7280;
    --success:#16a34a;
    --danger:#ef4444;
    --focus:#ffb703;
    --bank-bg:#eef6ff;
    font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  }
  body{
    margin:16px;
    background:linear-gradient(180deg,var(--bg),#eef3fb 60%);
    color:#111827;
  }
  .container{max-width:980px;margin:0 auto;padding:20px;}
  header{display:flex;align-items:center;gap:16px;margin-bottom:18px;}
  h1{font-size:20px;margin:0;}
  .meta{color:var(--muted);font-size:13px;}
  .puzzle-card{background:var(--card);border-radius:10px;box-shadow:0 6px 20px rgba(15,23,42,0.06);padding:18px;margin-bottom:18px;}
  .desc{background:linear-gradient(90deg,#fff,#fbfdff);padding:12px;border-radius:8px;border:1px dashed rgba(11,97,214,0.08);margin-bottom:12px;}
  .desc p{margin:6px 0;color:#0f172a;font-size:14px}
  .example{color:var(--muted);font-size:13px;margin-top:6px}
  .code-wrap{background:#0f172a;color:#e6eef8;border-radius:8px;padding:12px;font-family:"Courier New",monospace;font-size:14px;line-height:1.6;overflow:auto;}
  .blank{display:inline-block;min-width:48px;padding:2px 6px;margin:0 2px;border-radius:6px;background:rgba(255,255,255,0.07);border:2px dashed rgba(255,255,255,0.08);color:#fff;cursor:pointer;}
  .blank.empty{color:#cbd5e1;font-style:italic;}
  .blank.correct{background:rgba(22,163,74,0.18);border-color:rgba(22,163,74,0.5);color:var(--success);}
  .blank.incorrect{background:rgba(239,68,68,0.12);border-color:rgba(239,68,68,0.3);color:var(--danger);}
  .bank{margin-top:12px;display:flex;gap:8px;flex-wrap:wrap;background:var(--bank-bg);padding:10px;border-radius:8px;}
  .token{user-select:none;padding:8px 10px;border-radius:8px;background:#fff;border:1px solid rgba(2,6,23,0.06);box-shadow:0 2px 6px rgba(2,6,23,0.04);font-weight:600;font-size:13px;cursor:grab;}
  .controls{display:flex;gap:10px;margin-top:12px;align-items:center;flex-wrap:wrap;}
  button{padding:9px 14px;border-radius:8px;border:0;font-weight:600;background:var(--accent);color:white;cursor:pointer;}
  button.secondary{background:#fff;color:var(--accent);}
  button.ghost{background:transparent;color:var(--muted);border:1px dashed rgba(2,6,23,0.06);}
  .msg{margin-left:8px;color:var(--muted);font-weight:600;}
  select.puzzle-select{padding:8px;border-radius:8px;border:1px solid rgba(2,6,23,0.06);background:#fff;}
  .help{color:var(--muted);font-size:13px;margin-top:10px;}
</style>
</head>
<body>
<div class="container" id="app">
  <header>
    <div>
      <h1>Fill in the missing code â€” Conditionals</h1>
      <div class="meta">Drag or click tokens into blanks. Press Enter to place when using keyboard.</div>
    </div>
  </header>

  <main>
    <section class="puzzle-card" id="puzzleCard">
      <div class="desc" id="descBox"></div>
      <div class="code-wrap" id="codeWrap"></div>
      <div class="bank" id="bank"></div>

      <div class="controls">
        <button id="submitBtn">Submit</button>
        <button id="revealHintBtn" class="ghost">Reveal hint (3 left)</button>
        <button class="secondary" id="resetBtn">Reset</button>
        <button class="ghost" id="nextBtn">Next â†’</button>

        <div style="margin-left:auto;display:flex;align-items:center;gap:8px;">
          <label style="color:var(--muted);font-weight:600;">Puzzle</label>
          <select id="puzzleSelect" class="puzzle-select"></select>
        </div>
        <div class="msg" id="feedback"></div>
      </div>
      <div class="help">Keyboard: Tab to a token, press Enter to select. Tab to a blank, press Enter to place. Press Escape to clear or cancel selection.</div>
    </section>
  </main>
</div>

<script>
(function(){
function shuffle(a){const arr=a.slice();for(let i=arr.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[arr[i],arr[j]]=[arr[j],arr[i]];}return arr;}

const puzzles=[
{
title:"Basic IF â€” positive check",
description:"Read an integer and output whether it is positive.",
example:"Input 5 â†’ outputs: The number is positive",
lines:["INPUT number","IF number ___1___ 0 ___2___","OUTPUT \"The number is positive\"","ENDIF"],
bank:[">","THEN","<"],
solution:{1:">",2:"THEN"}
},
{
title:"IF-ELSE â€” even or odd (MOD)",
description:"Read an integer and print whether it is even or odd using MOD.",
example:"Input 4 â†’ outputs: Even",
lines:["INPUT n","IF n ___1___ 2 ___2___ 0 ___3___","OUTPUT \"Even\"","ELSE","OUTPUT \"Odd\"","ENDIF"],
bank:["MOD","=","THEN"],
solution:{1:"MOD",2:"=",3:"THEN"}
},
{
title:"Nested IF-ELSE â€” positive & large",
description:"Read a number. If it is positive, check whether it is larger than 100.",
example:"Input 150 â†’ outputs: Large and positive",
lines:["INPUT x","IF x ___1___ 0 ___2___","IF x ___3___ 100 ___4___","OUTPUT \"Large and positive\"","ELSE","OUTPUT \"Positive but not large\"","ENDIF","ELSE","OUTPUT \"Not positive\"","ENDIF"],
bank:[">","THEN"],
solution:{1:">",2:"THEN",3:">",4:"THEN"}
},
{
title:"IF with ELSE â€” zero or not (harder)",
description:"Read a number and report if it is zero or not zero. This version also requires filling the IF and ELSE keywords.",
example:"Input 0 â†’ outputs: Zero",
lines:[
"___1___ number ___2___ 0 ___3___",
"OUTPUT \"Zero\"",
"___4___",
"OUTPUT \"Not zero\"",
"___5___"
],
bank:["IF","THEN","ELSE","ENDIF","="],
solution:{1:"IF",2:"=",3:"THEN",4:"ELSE",5:"ENDIF"}
},
{
title:"Basic CASE â€” options",
description:"Read a code and select one of three options.",
example:"Input 2 â†’ outputs: Option Two",
lines:[
"INPUT code",
"___1___ code ___2___",
"1: OUTPUT \"Option One\"",
"2: OUTPUT \"Option Two\"",
"3: OUTPUT \"Option Three\"",
"___3___: OUTPUT \"Unknown\"",
"___4___"
],
bank:["CASE","OF","DEFAULT","ENDCASE"],
solution:{1:"CASE",2:"OF",3:"DEFAULT",4:"ENDCASE"}
},
{
title:"CASE inside IF â€” admin message",
description:"If admin is 1 show a CASE with specific admin welcome messages.",
example:"Input admin=1 and code=1 â†’ outputs: Welcome, superadmin",
lines:[
"INPUT admin",
"INPUT code",
"IF admin ___1___ 1 ___2___",
"CASE code ___3___",
"1: OUTPUT \"Welcome, superadmin\"",
"2: OUTPUT \"Welcome, admin\"",
"___4___: OUTPUT \"Welcome\"",
"___5___",
"ENDIF"
],
bank:["=","THEN","OF","DEFAULT","ENDCASE"],
solution:{1:"=",2:"THEN",3:"OF",4:"DEFAULT",5:"ENDCASE"}
},
{
title:"IF with CASEs in both branches",
description:"If userType = 1 run a CASE for admin options; otherwise run a CASE for guest options.",
example:"userType=2 â†’ outputs: Guest: View",
lines:[
"INPUT userType",
"INPUT choice",
"IF userType ___1___ 1 ___2___",
"CASE choice ___3___",
"1: ___4___ \"Admin: Edit\"",
"2: ___5___ \"Admin: Delete\"",
"___6___: ___7___ \"Admin: Unknown\"",
"___8___",
"ELSE",
"CASE choice ___9___",
"1: ___10___ \"Guest: View\"",
"2: ___11___ \"Guest: Browse\"",
"___12___: ___13___ \"Guest: Unknown\"",
"___14___",
"ENDIF"
],
bank:["=","THEN","OF","OUTPUT","DEFAULT","ENDCASE"],
solution:{1:"=",2:"THEN",3:"OF",4:"OUTPUT",5:"OUTPUT",6:"DEFAULT",7:"OUTPUT",8:"ENDCASE",9:"OF",10:"OUTPUT",11:"OUTPUT",12:"DEFAULT",13:"OUTPUT",14:"ENDCASE"}
},
{
title:"Two separate IF-ELSE statements",
description:"Check two independent conditions for temperature and wind speed.",
example:"temp=30, wind=25 â†’ 'Hot' and 'Windy'",
lines:[
"INPUT temp",
"INPUT windSpeed",
"IF temp ___1___ 25 ___2___",
"OUTPUT \"Hot\"",
"ELSE",
"OUTPUT \"Not hot\"",
"ENDIF",
"IF windSpeed ___3___ 20 ___4___",
"OUTPUT \"Windy\"",
"ELSE",
"OUTPUT \"Calm\"",
"ENDIF"
],
bank:[">","THEN"],
solution:{1:">",2:"THEN",3:">",4:"THEN"}
},
{
title:"IF using SUBSTRING â€” prefix check",
description:"Read a word. If its first three letters are 'pre', output a message.",
example:"Input 'prefix' â†’ outputs: Starts with pre",
lines:[
"INPUT word",
"IF ___1___(word,1,3) ___2___ ___3___ ___4___",
"OUTPUT \"Starts with pre\"",
"ELSE",
"OUTPUT \"Different prefix\"",
"ENDIF"
],
bank:["SUBSTRING","=","\"pre\"","THEN"],
solution:{1:"SUBSTRING",2:"=",3:"\"pre\"",4:"THEN"}
},
{
title:"Final: CASE + SUBSTRING + ROUND (hard)",
description:"Read a name and a score. If the name prefix matches 'Ann', greet the user; otherwise round the score and use a CASE structure to output a performance message.",
example:"name='Ann'; score=4.6 â†’ 'Excellent'",
lines:[
"INPUT name",
"INPUT score",
"___1___ (name, 1, 3) ___2___ \"Ann\" ___3___",
"___4___ \"Hello Ann\"",
"___5___",
"scoreRounded <- ___6___(score)",
"___7___ ___8___ ___9___",
"5: ___10___ \"Excellent\"",
"4: ___11___ \"Good\"",
"___12___",
"___13___ \"Keep trying\"",
"___14___",
"___15___"
],
bank:["IF","SUBSTRING","=","THEN","OUTPUT","ELSE","ROUND","CASE","OF","OUTPUT","OTHERWISE","ENDCASE","ENDIF","scoreRounded","<-"],
solution:{
1:"IF SUBSTRING",2:"=",3:"THEN",4:"OUTPUT",5:"ELSE",6:"ROUND",7:"CASE",8:"OF",9:"scoreRounded",10:"OUTPUT",11:"OUTPUT",12:"OTHERWISE",13:"OUTPUT",14:"ENDCASE",15:"ENDIF"}
}
];

let puzzleIndex=0,currentPuzzle=null,bankTokens=[],blankState={},selectedTokenIndex=null;
const usedHintsCount={};
const descBox=document.getElementById('descBox');
const codeWrap=document.getElementById('codeWrap');
const bankEl=document.getElementById('bank');
const feedbackEl=document.getElementById('feedback');
const submitBtn=document.getElementById('submitBtn');
const resetBtn=document.getElementById('resetBtn');
const nextBtn=document.getElementById('nextBtn');
const revealHintBtn=document.getElementById('revealHintBtn');
const puzzleSelect=document.getElementById('puzzleSelect');

function init(){
populatePuzzleSelect();
loadPuzzle(0);
submitBtn.onclick=onSubmit;
resetBtn.onclick=onReset;
nextBtn.onclick=onNext;
revealHintBtn.onclick=onRevealHint;
puzzleSelect.onchange=e=>loadPuzzle(+e.target.value);
document.addEventListener('keydown',e=>{if(e.key==='Escape')clearSelection();});
}
function populatePuzzleSelect(){
puzzleSelect.innerHTML='';
puzzles.forEach((p,i)=>{const o=document.createElement('option');o.value=i;o.textContent=`${i+1}. ${p.title}`;puzzleSelect.appendChild(o);});
}
function loadPuzzle(i){
puzzleIndex=i%puzzles.length;
currentPuzzle=JSON.parse(JSON.stringify(puzzles[puzzleIndex]));
bankTokens=shuffle(currentPuzzle.bank);
blankState={};
const regex=/___(\\d+)___/g;
currentPuzzle.lines.join().replace(regex,(m,n)=>blankState[+n]=null);
usedHintsCount[puzzleIndex]=usedHintsCount[puzzleIndex]||0;
render();
}
function render(){
renderDescription();
renderCode();
renderBank();
updateRevealHintBtn();
feedbackEl.textContent='';
puzzleSelect.value=puzzleIndex;
}
function renderDescription(){
descBox.innerHTML=`<strong>${currentPuzzle.title}</strong><p>${currentPuzzle.description}</p><div class='example'>Example: ${currentPuzzle.example}</div>`;
}
function renderCode(){
codeWrap.innerHTML='';
const regex=/___(\\d+)___/g;
currentPuzzle.lines.forEach(line=>{
const div=document.createElement('div');
div.className='code-line';
let last=0;let match;
while((match=regex.exec(line))!==null){
div.appendChild(document.createTextNode(line.slice(last,match.index)));
const bnum=+match[1];
const btn=document.createElement('button');
btn.type='button';
btn.className='blank empty';
btn.dataset.blank=bnum;
btn.textContent=`___${bnum}___`;
btn.onclick=()=>onBlankClick(bnum);
div.appendChild(btn);
last=regex.lastIndex;
}
div.appendChild(document.createTextNode(line.slice(last)));
codeWrap.appendChild(div);
});
updateBlankDisplays();
}
function renderBank(){
bankEl.innerHTML='';
bankTokens.forEach((tok,i)=>{
const t=document.createElement('div');
t.className='token';
t.dataset.index=i;
t.textContent=tok;
t.onclick=()=>onTokenClick(i);
bankEl.appendChild(t);
});
refreshBankVisual();
}
function onTokenClick(i){
selectedTokenIndex=selectedTokenIndex===i?null:i;
refreshBankVisual();
}
function onBlankClick(bnum){
if(selectedTokenIndex!=null){blankState[bnum]=bankTokens[selectedTokenIndex];clearSelection();updateBlankDisplays();return;}
if(blankState[bnum]){blankState[bnum]=null;updateBlankDisplays();}
}
function updateBlankDisplays(){
codeWrap.querySelectorAll('.blank').forEach(btn=>{
const n=+btn.dataset.blank;
const val=blankState[n];
btn.textContent=val||`___${n}___`;
btn.classList.toggle('empty',!val);
});
refreshBankVisual();
}
function refreshBankVisual(){
bankEl.querySelectorAll('.token').forEach((t,i)=>t.classList.toggle('selected',i===selectedTokenIndex));
}
function clearSelection(){selectedTokenIndex=null;refreshBankVisual();}
function onSubmit(){
const sol=currentPuzzle.solution;let all=true;
for(const n in blankState){
const placed=blankState[n];const exp=sol[n];
const b=codeWrap.querySelector(`[data-blank='${n}']`);
b.classList.remove('correct','incorrect');
if(placed===exp)b.classList.add('correct');else{b.classList.add('incorrect');all=false;}
}
feedbackEl.textContent=all?'All correct! ðŸŽ‰':'Some blanks incorrect.';
}
function onReset(){
for(const k in blankState)blankState[k]=null;
bankTokens=shuffle(currentPuzzle.bank);
renderBank();updateBlankDisplays();feedbackEl.textContent='Reset.';
selectedTokenIndex=null;updateRevealHintBtn();
}
function onNext(){loadPuzzle((puzzleIndex+1)%puzzles.length);}
function onRevealHint(){
const used=usedHintsCount[puzzleIndex];
if(used>=3){feedbackEl.textContent='No hints left.';return;}
const sol=currentPuzzle.solution;
const targets=Object.keys(blankState).filter(k=>sol[k]&&blankState[k]!==sol[k]);
if(!targets.length){feedbackEl.textContent='Nothing to hint.';return;}
const pick=targets[Math.floor(Math.random()*targets.length)];
blankState[pick]=sol[pick];
usedHintsCount[puzzleIndex]++;
updateBlankDisplays();
feedbackEl.textContent=`Hint used (${usedHintsCount[puzzleIndex]}/3).`;
updateRevealHintBtn();
}
function updateRevealHintBtn(){
const used=usedHintsCount[puzzleIndex];
const left=3-used;
revealHintBtn.textContent=`Reveal hint (${left} left)`;
revealHintBtn.disabled=left<=0;
}
init();
})();
</script>
</body>
</html>
